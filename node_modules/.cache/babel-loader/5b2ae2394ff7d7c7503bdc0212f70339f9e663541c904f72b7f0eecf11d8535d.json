{"ast":null,"code":"import'./LoginForm.css';import{login}from'../services/auth';import React,{useState}from'react';import{useWebSocket}from'../context/WebSocketContext';import{useRef}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const LoginForm=_ref=>{let{onContinuer}=_ref;const[username,setUsername]=useState('');const[password,setPassword]=useState('');const{connect}=useWebSocket();const[loginDisabled,setLoginDisabled]=useState(false);const[audioStarted,setAudioStarted]=useState(false);const audioRef=useRef(null);const startAudio=()=>{if(audioRef.current){audioRef.current.pause();audioRef.current.currentTime=0;}const audio=new Audio('/song.mp3');audio.loop=true;audio.play();setAudioStarted(true);};const handleLogin=async()=>{try{if(loginDisabled)return;setLoginDisabled(true);const response=await login({username:username,password});const token=response.access_token;// startAudio();\n// localStorage.setItem('accessToken', token);\nconnect(token);onContinuer();}catch(error){alert('Erreur de connexion');setLoginDisabled(false);console.error(error);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"login-container\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"username\",placeholder:\"Username\",className:\"input-field\",value:username,onChange:e=>setUsername(e.target.value)}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"Mot de passe\",className:\"input-field\",value:password,onChange:e=>setPassword(e.target.value)}),/*#__PURE__*/_jsx(\"button\",{className:\"continue-button\",onClick:handleLogin,disabled:loginDisabled,children:\"Continuer\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"signup-text\",children:[\"Pas de compte?\",/*#__PURE__*/_jsx(\"a\",{href:\"#\",children:\" Cr\\xE9er\"})]})]});};export default LoginForm;","map":{"version":3,"names":["login","React","useState","useWebSocket","useRef","jsx","_jsx","jsxs","_jsxs","LoginForm","_ref","onContinuer","username","setUsername","password","setPassword","connect","loginDisabled","setLoginDisabled","audioStarted","setAudioStarted","audioRef","startAudio","current","pause","currentTime","audio","Audio","loop","play","handleLogin","response","token","access_token","error","alert","console","className","children","type","placeholder","value","onChange","e","target","onClick","disabled","href"],"sources":["/home/hugo/Documents/4A/cyber/front_url_parser/src/components/LoginForm.tsx"],"sourcesContent":["import { useEffect } from 'react';\nimport './LoginForm.css';\nimport { login } from '../services/auth'; \nimport React, { useState } from 'react';\nimport { useWebSocket } from '../context/WebSocketContext';\nimport { useRef } from 'react';\nimport { log } from 'console';\ntype Props = {\n  onContinuer: () => void;\n};\n\nconst LoginForm = ({ onContinuer }: Props) => {\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const { connect } = useWebSocket();\n  const [loginDisabled, setLoginDisabled] = useState(false);\n\n const [audioStarted, setAudioStarted] = useState(false);\n  const audioRef = useRef<HTMLAudioElement | null>(null);\n  const startAudio = () => {\n    if (audioRef.current) {\n      audioRef.current.pause();\n      audioRef.current.currentTime = 0;\n    }\n    const audio = new Audio('/song.mp3');\n    audio.loop = true;\n    audio.play();\n    setAudioStarted(true);\n  };\n\n\n  const handleLogin = async () => {\n    try {\n      if (loginDisabled) return;\n      setLoginDisabled(true);\n      \n      const response = await login({ username: username, password });\n      const token = response.access_token;\n      // startAudio();\n      // localStorage.setItem('accessToken', token);\n      connect(token);\n      onContinuer();\n    } catch (error) {\n      alert('Erreur de connexion');\n      setLoginDisabled(false);\n      console.error(error);\n    }\n  };\n\n   return (\n    <div className=\"login-container\">\n      <input\n        type=\"username\"\n        placeholder=\"Username\"\n        className=\"input-field\"\n        value={username}\n        onChange={e => setUsername(e.target.value)}\n      />\n      <input\n        type=\"password\"\n        placeholder=\"Mot de passe\"\n        className=\"input-field\"\n        value={password}\n        onChange={e => setPassword(e.target.value)}\n      />\n      <button className=\"continue-button\" onClick={handleLogin} disabled={loginDisabled}>\n        Continuer\n      </button>\n      <div className=\"signup-text\">\n        Pas de compte?\n        <a href=\"#\"> Cr√©er</a>\n      </div>\n    </div>\n  );\n};\n\n\nexport default LoginForm;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}